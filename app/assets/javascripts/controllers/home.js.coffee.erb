<% environment.context_class.instance_eval { include ActionView::Helpers } %>
<% environment.context_class.instance_eval { include HostHelper } %>
<% environment.context_class.instance_eval { include Rails.application.routes.url_helpers } %>

App.controller 'HomeCtrl', ['$scope', '$location', '$timeout', '$http', \
                            ($scope, $location, $timeout, $http) ->
  $scope.results = []

  $scope.$watch 'search', ->
    $http.get('<%= angularApiPath(api_search_by_name_path) %>', {
      params: {
        name: $scope.search,
      },
    }).success((data, status, headers, config) ->
      $scope.results = data.results
    ).error((data, status, headers, config) ->
    )
]
